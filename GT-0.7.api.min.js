var Sha256={hash:function(a){var c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];a+=String.fromCharCode(128);for(var e=Math.ceil((a.length/4+2)/16),f=Array(e),h=0;h<e;h++){f[h]=Array(16);for(var g=0;16>g;g++)f[h][g]=a.charCodeAt(64*h+4*g)<<24|a.charCodeAt(64*h+4*g+1)<<16|a.charCodeAt(64*
h+4*g+2)<<8|a.charCodeAt(64*h+4*g+3)}f[e-1][14]=8*(a.length-1)/Math.pow(2,32);f[e-1][14]=Math.floor(f[e-1][14]);f[e-1][15]=8*(a.length-1)&4294967295;a=Array(64);for(var l,m,q,k,n,p,r,h=0;h<e;h++){for(var d=0;16>d;d++)a[d]=f[h][d];for(d=16;64>d;d++)a[d]=Sha256.sigma1(a[d-2])+a[d-7]+Sha256.sigma0(a[d-15])+a[d-16]&4294967295;g=b[0];l=b[1];m=b[2];q=b[3];k=b[4];n=b[5];p=b[6];r=b[7];for(d=0;64>d;d++){var s=r+Sha256.Sigma1(k)+Sha256.Ch(k,n,p)+c[d]+a[d],t=Sha256.Sigma0(g)+Sha256.Maj(g,l,m);r=p;p=n;n=k;k=
q+s&4294967295;q=m;m=l;l=g;g=s+t&4294967295}b[0]=b[0]+g&4294967295;b[1]=b[1]+l&4294967295;b[2]=b[2]+m&4294967295;b[3]=b[3]+q&4294967295;b[4]=b[4]+k&4294967295;b[5]=b[5]+n&4294967295;b[6]=b[6]+p&4294967295;b[7]=b[7]+r&4294967295}return Sha256.toHexStr(b[0])+Sha256.toHexStr(b[1])+Sha256.toHexStr(b[2])+Sha256.toHexStr(b[3])+Sha256.toHexStr(b[4])+Sha256.toHexStr(b[5])+Sha256.toHexStr(b[6])+Sha256.toHexStr(b[7])},ROTR:function(a,c){return c>>>a|c<<32-a},Sigma0:function(a){return Sha256.ROTR(2,a)^Sha256.ROTR(13,
a)^Sha256.ROTR(22,a)},Sigma1:function(a){return Sha256.ROTR(6,a)^Sha256.ROTR(11,a)^Sha256.ROTR(25,a)},sigma0:function(a){return Sha256.ROTR(7,a)^Sha256.ROTR(18,a)^a>>>3},sigma1:function(a){return Sha256.ROTR(17,a)^Sha256.ROTR(19,a)^a>>>10},Ch:function(a,c,b){return a&c^~a&b},Maj:function(a,c,b){return a&c^a&b^c&b},toHexStr:function(a){for(var c="",b,e=7;0<=e;e--)b=a>>>4*e&15,c+=b.toString(16);return c}},GT={},app_id=0,secret="",queued_funcs=[],is_inited=!1,checkInit=function(a,c){if(is_inited){var b=
wrapFunction(a,GT,c);queued_funcs.push(b);return!1}return!0},wrapFunction=function(a,c,b){return function(){a.apply(c,b)}},auth=function(a){if(checkInit(auth,[a])){var c=Sha256.hash("/AppAuth"+secret,!1);console.log(c);var b=new XMLHttpRequest;b.open("GET","https://www.greenticket.dk/api/AppAuth?app_id="+app_id+"&hmac="+c);b.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var b=JSON.parse(this.responseText);b.success?a(!0,"Authentication successful"):a(!1,b.errMsg)}};b.send(null)}};
GT.init=function(a,c){for(var b=["app_id","secret"],e=Object.keys(a),f=b.length-1;0<=f;f--)if(0>e.indexOf(b[f]))throw Error("Missing parameter","Missing the paramter `"+b[f]+"`");app_id=a.app_id;secret=a.secret;auth(function(a,b){if(a){for(is_inited=!0;0<queued_funcs.length;)queued_funcs.shift()();c&&c(a)}else throw Error('Failed authentication: "'+b+'"');})};
GT.api=function(a,c,b){if(checkInit(GT.api,[a,c,b])&&a&&c){var e=Sha256.hash(""+a+secret);console.log(e);var f=new XMLHttpRequest;f.open(c,"https://www.greenticket.dk/api"+a+"?app_id="+app_id+"&hmac="+e);f.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(this.responseText);b(a)}else b(!1,"Connection Error")};f.send(null)}};