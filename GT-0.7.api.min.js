var Sha256={hash:function(a){var c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];a+=String.fromCharCode(128);for(var f=Math.ceil((a.length/4+2)/16),d=Array(f),h=0;h<f;h++){d[h]=Array(16);for(var g=0;16>g;g++)d[h][g]=a.charCodeAt(64*h+4*g)<<24|a.charCodeAt(64*h+4*g+1)<<16|a.charCodeAt(64*
h+4*g+2)<<8|a.charCodeAt(64*h+4*g+3)}d[f-1][14]=8*(a.length-1)/Math.pow(2,32);d[f-1][14]=Math.floor(d[f-1][14]);d[f-1][15]=8*(a.length-1)&4294967295;a=Array(64);for(var l,m,q,k,n,p,r,h=0;h<f;h++){for(var e=0;16>e;e++)a[e]=d[h][e];for(e=16;64>e;e++)a[e]=Sha256.sigma1(a[e-2])+a[e-7]+Sha256.sigma0(a[e-15])+a[e-16]&4294967295;g=b[0];l=b[1];m=b[2];q=b[3];k=b[4];n=b[5];p=b[6];r=b[7];for(e=0;64>e;e++){var s=r+Sha256.Sigma1(k)+Sha256.Ch(k,n,p)+c[e]+a[e],t=Sha256.Sigma0(g)+Sha256.Maj(g,l,m);r=p;p=n;n=k;k=
q+s&4294967295;q=m;m=l;l=g;g=s+t&4294967295}b[0]=b[0]+g&4294967295;b[1]=b[1]+l&4294967295;b[2]=b[2]+m&4294967295;b[3]=b[3]+q&4294967295;b[4]=b[4]+k&4294967295;b[5]=b[5]+n&4294967295;b[6]=b[6]+p&4294967295;b[7]=b[7]+r&4294967295}return Sha256.toHexStr(b[0])+Sha256.toHexStr(b[1])+Sha256.toHexStr(b[2])+Sha256.toHexStr(b[3])+Sha256.toHexStr(b[4])+Sha256.toHexStr(b[5])+Sha256.toHexStr(b[6])+Sha256.toHexStr(b[7])},ROTR:function(a,c){return c>>>a|c<<32-a},Sigma0:function(a){return Sha256.ROTR(2,a)^Sha256.ROTR(13,
a)^Sha256.ROTR(22,a)},Sigma1:function(a){return Sha256.ROTR(6,a)^Sha256.ROTR(11,a)^Sha256.ROTR(25,a)},sigma0:function(a){return Sha256.ROTR(7,a)^Sha256.ROTR(18,a)^a>>>3},sigma1:function(a){return Sha256.ROTR(17,a)^Sha256.ROTR(19,a)^a>>>10},Ch:function(a,c,b){return a&c^~a&b},Maj:function(a,c,b){return a&c^a&b^c&b},toHexStr:function(a){for(var c="",b,f=7;0<=f;f--)b=a>>>4*f&15,c+=b.toString(16);return c}},GT={},app_id=0,secret="",queued_funcs=[],is_inited=!1,checkInit=function(a,c){if(is_inited)return!0;
var b=wrapFunction(a,GT,c);queued_funcs.push(b);return!1},wrapFunction=function(a,c,b){return function(){a.apply(c,b)}},auth=function(a){if(checkInit(auth,[a])){var c=Sha256.hash("/AppAuth"+secret),b=new XMLHttpRequest;b.open("GET","https://www.greenticket.dk/api/AppAuth?app_id="+app_id+"&hmac="+c);b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var c=JSON.parse(b.responseText);c.success?a(!0,"Authentication successful"):c.errMsg?a(!1,c.errMsg):a(!1,"Unkown error")}};b.send(null)}};
GT.init=function(a,c){for(var b=["app_id","secret"],f=Object.keys(a),d=b.length-1;0<=d;d--)if(0>f.indexOf(b[d]))throw Error("Missing parameter","Missing the paramter `"+b[d]+"`");app_id=a.app_id;secret=a.secret;auth(function(a,b){if(a){for(is_inited=!0;0<queued_funcs.length;)queued_funcs.shift()();c&&c(a)}else throw Error('Failed authentication: "'+b+'"');})};
GT.api=function(a,c,b){if(checkInit(GT.api,[a,c,b])&&a&&c){var f=Sha256.hash(""+a+secret),d=new XMLHttpRequest;d.open(c,"https://www.greenticket.dk/api"+a+"?app_id="+app_id+"&hmac="+f);d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a=JSON.parse(d.responseText);b(a)}else b(!1,"Connection Error")};d.send(null)}};